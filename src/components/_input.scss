@use "../props/prefixes" as *;

// ============================================
// Prefixes
// ============================================
// Prefixes
$input-prefix: #{$prefix}input- !default;

// Class Names
$input-class-name: "input" !default;

// Variable Names
$input-height-var: --#{$input-prefix}height !default;
$input-padding-x-var: --#{$input-prefix}padding-x !default;
$input-padding-y-var: --#{$input-prefix}padding-y !default;
$input-font-size-var: --#{$input-prefix}font-size !default;
$input-line-height-var: --#{$input-prefix}line-height !default;
$input-bg-var: --#{$input-prefix}bg !default;
$input-color-var: --#{$input-prefix}color !default;
$input-border-color-var: --#{$input-prefix}border-color !default;
$input-placeholder-color-var: --#{$input-prefix}placeholder-color !default;
$input-bg-hover-var: --#{$input-prefix}bg-hover !default;
$input-border-color-hover-var: --#{$input-prefix}border-color-hover !default;
$input-bg-focus-var: --#{$input-prefix}bg-focus !default;
$input-border-color-focus-var: --#{$input-prefix}border-color-focus !default;
$input-focus-ring-width-var: --#{$input-prefix}focus-ring-width !default;
$input-focus-ring-color-var: --#{$input-prefix}focus-ring-color !default;
$input-bg-disabled-var: --#{$input-prefix}bg-disabled !default;
$input-color-disabled-var: --#{$input-prefix}color-disabled !default;
$input-border-color-disabled-var: --#{$input-prefix}border-color-disabled !default;
$input-bg-readonly-var: --#{$input-prefix}bg-readonly !default;
$input-color-readonly-var: --#{$input-prefix}color-readonly !default;
$input-border-color-readonly-var: --#{$input-prefix}border-color-readonly !default;
$input-border-width-var: --#{$input-prefix}border-width !default;
$input-border-radius-var: --#{$input-prefix}border-radius !default;
$input-transition-var: --#{$input-prefix}transition !default;
$form-input-gap-var: --form-input-gap !default;

// ============================================
// Process
// ============================================
// ============================================
// CSS Variables
// ============================================
.#{$input-class-name} {
  #{$input-height-var}: 2.5rem;
  #{$input-padding-x-var}: 0.75rem;
  #{$input-padding-y-var}: 0.5rem;
  #{$input-font-size-var}: 1rem;
  #{$input-line-height-var}: 1.5;

  // Colors
  #{$input-bg-var}: transparent;
  #{$input-color-var}: inherit;
  #{$input-border-color-var}: lightgray;
  #{$input-placeholder-color-var}: gray;

  #{$input-bg-hover-var}: transparent;
  #{$input-border-color-hover-var}: gray;

  #{$input-bg-focus-var}: transparent;
  #{$input-border-color-focus-var}: gray;
  #{$input-focus-ring-width-var}: 2px;
  #{$input-focus-ring-color-var}: blue;

  #{$input-bg-disabled-var}: lightgray;
  #{$input-color-disabled-var}: gray;
  #{$input-border-color-disabled-var}: gray;

  #{$input-bg-readonly-var}: transparent;
  #{$input-color-readonly-var}: inherit;
  #{$input-border-color-readonly-var}: lightgray;

  #{$input-border-width-var}: 1px;
  #{$input-border-radius-var}: 0.25rem;

  #{$input-transition-var}:
    border-color 0.15s ease-in-out,
    background-color 0.15s ease-in-out,
    box-shadow 0.15s ease-in-out;

  // Form wrapper gap
  #{$form-input-gap-var}: 0.5rem;
}

// ============================================
// Input
// ============================================
.#{$input-class-name},
input.#{$input-class-name},
textarea.#{$input-class-name} {
  // Reset
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;

  // Display
  display: block;
  width: 100%;

  // Size
  height: var(#{$input-height-var});
  padding: var(#{$input-padding-y-var}) var(#{$input-padding-x-var});
  font-size: var(#{$input-font-size-var});
  line-height: var(#{$input-line-height-var});

  // Colors
  background-color: var(#{$input-bg-var});
  color: var(#{$input-color-var});

  // Border
  border: var(#{$input-border-width-var}) solid var(#{$input-border-color-var});
  border-radius: var(#{$input-border-radius-var});

  // Transition
  transition: var(#{$input-transition-var});

  // Font
  font-family: inherit;

  // ----------------------------------------
  // Placeholder
  // ----------------------------------------
  &::placeholder {
    color: var(#{$input-placeholder-color-var});
    opacity: 1; // Firefox fix
  }

  // ----------------------------------------
  // Hover State
  // ----------------------------------------
  &:hover:not(:disabled):not(:read-only):not(:focus) {
    background-color: var(#{$input-bg-hover-var});
    border-color: var(#{$input-border-color-hover-var});
  }

  // ----------------------------------------
  // Focus State
  // ----------------------------------------
  &:focus:not(:read-only) {
    outline: none;
    background-color: var(#{$input-bg-focus-var});
    border-color: var(#{$input-border-color-focus-var});
    box-shadow: 0 0 0 var(#{$input-focus-ring-width-var})
      var(#{$input-focus-ring-color-var});
  }

  &:focus:read-only {
    outline: none;
  }

  // ----------------------------------------
  // Disabled State
  // ----------------------------------------
  &:disabled {
    background-color: var(#{$input-bg-disabled-var});
    color: var(#{$input-color-disabled-var});
    border-color: var(#{$input-border-color-disabled-var});
    cursor: not-allowed;
    opacity: 1; // Override browser default
  }

  // ----------------------------------------
  // Readonly State
  // ----------------------------------------
  &:read-only:not(:disabled) {
    background-color: var(#{$input-bg-readonly-var});
    color: var(#{$input-color-readonly-var});
    border-color: var(#{$input-border-color-readonly-var});
    cursor: default;
  }
}

// ============================================
// Textarea
// ============================================
textarea.#{$input-class-name} {
  height: auto;
  min-height: calc(var(#{$input-height-var}) * 2);
  resize: vertical;
}

// Textarea with no resize
textarea.input-no-resize {
  resize: none;
}

// Textarea with horizontal resize
textarea.input-resize-horizontal {
  resize: horizontal;
}

// Textarea with both resize
textarea.input-resize-both {
  resize: both;
}

// ============================================
// Input Group
// ============================================
// Usage:
// <div class="input-group">
//     <span class="input-addon">@</span>
//     <input type="text" class="input">
// </div>

.input-group {
  display: flex;
  align-items: stretch;
  width: 100%;

  // Reset border-radius for grouped elements
  > .#{$input-class-name} {
    flex: 1 1 auto;
    width: 1%; // Fix for flex items in some browsers
    min-width: 0;

    &:not(:first-child) {
      border-top-left-radius: 0;
      border-bottom-left-radius: 0;
    }

    &:not(:last-child) {
      border-top-right-radius: 0;
      border-bottom-right-radius: 0;
    }
  }
}

// ============================================
// Input Addon
// ============================================
.#{$input-class-name}-addon {
  display: flex;
  align-items: center;
  padding: var(#{$input-padding-y-var}) var(#{$input-padding-x-var});
  font-size: var(#{$input-font-size-var});
  line-height: var(#{$input-line-height-var});
  color: var(#{$input-color-var});
  background-color: transparent;
  border: var(#{$input-border-width-var}) solid var(#{$input-border-color-var});
  white-space: nowrap;

  &:first-child {
    border-right: 0;
    border-radius: var(#{$input-border-radius-var}) 0 0
      var(#{$input-border-radius-var});
  }

  &:last-child {
    border-left: 0;
    border-radius: 0 var(#{$input-border-radius-var})
      var(#{$input-border-radius-var}) 0;
  }
}

// ============================================
// Input with Icon
// ============================================
// Usage:
// <div class="input-icon">
//     <span class="input-icon-left">üîç</span>
//     <input type="text" class="input">
// </div>
//
// <div class="input-icon">
//     <input type="text" class="input">
//     <span class="input-icon-right">‚úì</span>
// </div>

.#{$input-class-name}-icon {
  position: relative;
  display: flex;
  align-items: center;
  width: 100%;

  > .#{$input-class-name} {
    width: 100%;
  }

  // Has left icon
  &:has(.#{$input-class-name}-icon-left) > .#{$input-class-name} {
    padding-left: calc(var(#{$input-padding-x-var}) * 2 + 1em);
  }

  // Has right icon
  &:has(.#{$input-class-name}-icon-right) > .#{$input-class-name} {
    padding-right: calc(var(#{$input-padding-x-var}) * 2 + 1em);
  }
}

.#{$input-class-name}-icon-left,
.#{$input-class-name}-icon-right {
  position: absolute;
  display: flex;
  align-items: center;
  justify-content: center;
  height: 100%;
  width: calc(var(#{$input-padding-x-var}) * 2 + 1em);
  color: var(#{$input-placeholder-color-var});
  pointer-events: none;
}

.#{$input-class-name}-icon-left {
  left: 0;
}
.#{$input-class-name}-icon-right {
  right: 0;
}

// Clickable icon (e.g., clear button, password toggle)
.#{$input-class-name}-icon-clickable {
  pointer-events: auto;
  cursor: pointer;

  &:hover {
    color: var(#{$input-color-var});
  }
}

// ============================================
// Form Label
// ============================================
.form-label {
  display: block;
  margin-bottom: 0.5rem;
  font-size: var(#{$input-font-size-var});
  font-weight: 500;
  color: var(#{$input-color-var});
}

// ============================================
// Form Text (helper text)
// ============================================
.form-text {
  display: block;
  margin-top: 0.25rem;
  font-size: 0.875em;
  color: var(#{$input-placeholder-color-var});
}

// ============================================
// Form Group (label + input + helper)
// ============================================
// Usage:
// <div class="form-group">
//     <label class="form-label">Email</label>
//     <input type="email" class="input" placeholder="Enter email">
//     <span class="form-text">We'll never share your email.</span>
// </div>

.form-group {
  margin-bottom: 1rem;
}

// ============================================
// Inline Form
// ============================================
.form-inline {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 0.5rem;

  > .#{$input-class-name} {
    width: auto;
    flex: 1 1 auto;
  }

  > .form-label {
    margin-bottom: 0;
  }
}
